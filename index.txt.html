<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>å‹æƒ…å¤§è€ƒé©—ï½œæ±ä¸ƒé™å®šç‰ˆ</title>
  <meta name="description" content="20é¡Œå››é¸ä¸€å‹æƒ…å¤§è€ƒé©—ã€‚å¯åˆ†äº«ç¾¤çµ„ä¸€èµ·ç©ã€‚" />
  <style>
    :root{
      --bg0:#070A12;
      --bg1:#0B1020;
      --card:rgba(255,255,255,.08);
      --card2:rgba(255,255,255,.12);
      --line:rgba(255,255,255,.12);
      --text:rgba(255,255,255,.92);
      --muted:rgba(255,255,255,.68);
      --brand:#7C5CFF;
      --brand2:#33D6FF;
      --good:#2EE59D;
      --bad:#FF5C7C;
      --shadow: 0 20px 60px rgba(0,0,0,.45);
      --radius:18px;
      --radius2:24px;
      --font: ui-sans-serif, system-ui, -apple-system, "PingFang TC", "Noto Sans TC", "Microsoft JhengHei", Arial, sans-serif;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:var(--font);
      color:var(--text);
      background:
        radial-gradient(1200px 600px at 15% 10%, rgba(124,92,255,.25), transparent 60%),
        radial-gradient(900px 500px at 85% 15%, rgba(51,214,255,.18), transparent 55%),
        radial-gradient(700px 450px at 50% 95%, rgba(46,229,157,.10), transparent 55%),
        linear-gradient(180deg, var(--bg0), var(--bg1));
      overflow-x:hidden;
    }
    .wrap{
      max-width:920px;
      margin:0 auto;
      padding:22px 16px 44px;
    }
    .topbar{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      margin-bottom:14px;
    }
    .badge{
      display:inline-flex;
      align-items:center;
      gap:10px;
      padding:10px 14px;
      border:1px solid var(--line);
      border-radius:999px;
      background:rgba(255,255,255,.04);
      backdrop-filter: blur(10px);
      box-shadow: 0 10px 30px rgba(0,0,0,.25);
      user-select:none;
    }
    .dot{
      width:10px;height:10px;border-radius:999px;
      background: linear-gradient(135deg, var(--brand), var(--brand2));
      box-shadow: 0 0 0 6px rgba(124,92,255,.15);
    }
    .btn{
      appearance:none;border:0;cursor:pointer;
      border-radius:14px;
      padding:12px 14px;
      color:var(--text);
      background:rgba(255,255,255,.06);
      border:1px solid var(--line);
      transition:.15s transform,.15s background,.15s border-color;
      display:inline-flex; align-items:center; gap:10px;
      font-weight:650;
    }
    .btn:hover{transform: translateY(-1px); background:rgba(255,255,255,.08); border-color:rgba(255,255,255,.18);}
    .btn.primary{
      background: linear-gradient(135deg, rgba(124,92,255,.95), rgba(51,214,255,.85));
      border-color: rgba(255,255,255,.15);
      box-shadow: 0 18px 50px rgba(124,92,255,.25);
    }
    .btn.primary:hover{transform: translateY(-2px)}
    .btn.danger{
      background: rgba(255,92,124,.10);
      border-color: rgba(255,92,124,.25);
    }
    .hero{
      padding:26px 20px 18px;
      border-radius: var(--radius2);
      border:1px solid var(--line);
      background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.05));
      box-shadow: var(--shadow);
      position:relative;
      overflow:hidden;
    }
    .hero:before{
      content:"";
      position:absolute; inset:-2px;
      background: radial-gradient(900px 240px at 20% 10%, rgba(124,92,255,.22), transparent 55%),
                  radial-gradient(700px 220px at 80% 0%, rgba(51,214,255,.18), transparent 55%);
      filter: blur(6px);
      z-index:0;
    }
    .hero > *{position:relative; z-index:1}
    h1{margin:0 0 6px; font-size:28px; letter-spacing:.4px;}
    .sub{margin:0;color:var(--muted); line-height:1.6;}
    .grid{
      display:grid;
      grid-template-columns: 1.2fr .8fr;
      gap:14px;
      margin-top:16px;
    }
    @media (max-width:860px){ .grid{grid-template-columns:1fr;}}
    .panel{
      border-radius: var(--radius);
      border:1px solid var(--line);
      background: rgba(255,255,255,.06);
      padding:16px;
      box-shadow: 0 12px 30px rgba(0,0,0,.25);
    }
    .panel h2{margin:0 0 10px; font-size:15px; color:rgba(255,255,255,.88); letter-spacing:.3px;}
    .rules{
      margin:0; padding-left:18px; color:var(--muted); line-height:1.7;
      font-size:14px;
    }
    .progressWrap{
      display:flex; align-items:center; justify-content:space-between;
      gap:12px;
      margin-top:12px;
      color:var(--muted);
      font-size:13px;
    }
    .bar{
      width:100%;
      height:10px;
      border-radius:999px;
      background: rgba(255,255,255,.10);
      overflow:hidden;
      border:1px solid rgba(255,255,255,.10);
    }
    .fill{
      height:100%;
      width:0%;
      border-radius:999px;
      background: linear-gradient(90deg, var(--brand), var(--brand2));
      transition: width .25s ease;
    }
    .quizCard{
      margin-top:14px;
      border-radius: var(--radius2);
      border:1px solid var(--line);
      background: rgba(255,255,255,.06);
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .qHead{
      padding:16px 18px;
      border-bottom:1px solid rgba(255,255,255,.10);
      display:flex; align-items:flex-start; justify-content:space-between; gap:12px;
    }
    .qTitle{
      margin:0;
      font-size:16px;
      line-height:1.55;
      letter-spacing:.2px;
    }
    .chip{
      flex:0 0 auto;
      padding:6px 10px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      color:rgba(255,255,255,.80);
      font-weight:650;
      font-size:12px;
    }
    .options{padding:14px 14px 18px; display:grid; gap:10px;}
    .opt{
      border:1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.12);
      border-radius: 16px;
      padding:12px 12px;
      cursor:pointer;
      display:flex; align-items:flex-start; gap:12px;
      transition: .15s transform, .15s background, .15s border-color;
      user-select:none;
    }
    .opt:hover{transform: translateY(-1px); border-color: rgba(255,255,255,.18); background: rgba(0,0,0,.16);}
    .opt.disabled{cursor:not-allowed; opacity:.92}
    .bubble{
      width:30px; height:30px;
      border-radius: 12px;
      border:1px solid rgba(255,255,255,.16);
      display:flex; align-items:center; justify-content:center;
      font-weight:750;
      background: rgba(255,255,255,.06);
      flex:0 0 auto;
    }
    .opt .txt{line-height:1.45; color:rgba(255,255,255,.88); font-weight:600;}
    .opt.selected{border-color: rgba(124,92,255,.45); background: rgba(124,92,255,.12);}
    .opt.correct{border-color: rgba(46,229,157,.55); background: rgba(46,229,157,.12);}
    .opt.wrong{border-color: rgba(255,92,124,.55); background: rgba(255,92,124,.12);}
    .footer{
      display:flex; flex-wrap:wrap;
      gap:10px;
      justify-content:space-between;
      align-items:center;
      padding:14px 14px 16px;
      border-top:1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.10);
    }
    .muted{color:var(--muted)}
    .toast{
      position: fixed;
      left:50%; bottom:18px;
      transform: translateX(-50%);
      background: rgba(0,0,0,.70);
      border: 1px solid rgba(255,255,255,.18);
      color: rgba(255,255,255,.92);
      padding: 10px 12px;
      border-radius: 14px;
      box-shadow: 0 12px 30px rgba(0,0,0,.35);
      backdrop-filter: blur(10px);
      opacity:0;
      pointer-events:none;
      transition: opacity .18s ease, transform .18s ease;
      font-size:13px;
      max-width: 92vw;
      text-align:center;
      line-height:1.35;
    }
    .toast.show{opacity:1; transform: translateX(-50%) translateY(-4px);}
    .result{
      padding:16px 18px 18px;
      display:none;
    }
    .result h3{margin:0 0 6px; font-size:18px;}
    .scoreRow{
      display:flex; flex-wrap:wrap; gap:12px; align-items:center;
      margin:10px 0 14px;
    }
    .scorePill{
      padding:8px 12px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      font-weight:750;
    }
    .rank{
      padding:8px 12px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.14);
      background: linear-gradient(135deg, rgba(46,229,157,.18), rgba(51,214,255,.12));
      font-weight:800;
    }
    details{
      border:1px solid rgba(255,255,255,.12);
      border-radius: 16px;
      background: rgba(0,0,0,.10);
      padding: 10px 12px;
    }
    details summary{
      cursor:pointer;
      font-weight:750;
      color: rgba(255,255,255,.86);
      outline:none;
    }
    .review{
      margin-top:10px;
      display:grid;
      gap:10px;
    }
    .reviewItem{
      padding:10px 12px;
      border-radius: 14px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.05);
    }
    .reviewItem .t{font-weight:800; margin-bottom:6px;}
    .reviewItem .a{color:rgba(255,255,255,.82); line-height:1.5;}
    .pillGood{color:var(--good); font-weight:900}
    .pillBad{color:var(--bad); font-weight:900}
    .small{font-size:12px}
  </style>
</head>

<body>
  <div class="wrap">
    <div class="topbar">
      <div class="badge" title="20é¡Œå››é¸ä¸€">
        <span class="dot"></span>
        <span><b>å‹æƒ…å¤§è€ƒé©—</b>ï½œæ±ä¸ƒé™å®šç‰ˆ</span>
      </div>
      <button class="btn" id="btnResetTop" type="button" style="display:none">é‡æ–°é–‹å§‹</button>
    </div>

    <section class="hero" id="hero">
      <h1>ä½ çœŸçš„æ‡‚æˆ‘å€‘å—ï¼Ÿ</h1>
      <p class="sub">20 é¡Œå››é¸ä¸€ï¼Œç­”æ¡ˆå…¨éƒ½è—åœ¨ç¾¤çµ„èŠå¤©è£¡ã€‚<br/>ä¸å‡†è¨è«–ã€ä¸å‡†å·çœ‹è¨Šæ¯ï¼Œç­”å®Œå†å…¬å¸ƒåˆ†æ•¸ï¼</p>

      <div class="grid">
        <div class="panel">
          <h2>ç©æ³•</h2>
          <ol class="rules">
            <li>æ¯é¡Œåªèƒ½é¸ä¸€å€‹ç­”æ¡ˆã€‚</li>
            <li>é¸å®Œæœƒç«‹åˆ»é–å®šï¼Œé¿å…æ”¹ç­”æ¡ˆã€‚</li>
            <li>æœ€å¾Œæœƒé¡¯ç¤ºåˆ†æ•¸ + ç¨±è™Ÿï¼Œä¸¦å¯ä¸€éµè¤‡è£½ã€Œæˆç¸¾å…¬å‘Šã€è²¼å›ç¾¤çµ„ã€‚</li>
          </ol>
        </div>
        <div class="panel">
          <h2>å°æé†’</h2>
          <ul class="rules">
            <li>é€™æ˜¯ã€ŒèŠå¤©å…§å®¹è€ƒå¤ã€ç‰ˆæœ¬ã€‚</li>
            <li>å»ºè­°ç”¨æ‰‹æ©Ÿé–‹ï¼ŒUI æœƒæ¯”è¼ƒçˆ½ã€‚</li>
            <li>å¦‚æœä½ è¦æŠŠå®ƒæ”¾åˆ°ç¶²è·¯ä¸Šï¼šGitHub Pages / Netlify / Vercel éƒ½å¯ä»¥ã€‚</li>
          </ul>
        </div>
      </div>

      <div class="progressWrap">
        <div class="bar" aria-label="progress"><div class="fill" id="fill"></div></div>
        <div><span id="pNow">0</span>/<span id="pTotal">20</span></div>
      </div>

      <div style="margin-top:14px; display:flex; gap:10px; flex-wrap:wrap;">
        <button class="btn primary" id="btnStart" type="button">é–‹å§‹æ¸¬é©—</button>
        <button class="btn" id="btnShareLink" type="button" title="è¤‡è£½åˆ†äº«æ–‡ï¼ˆé™„ä½¿ç”¨èªªæ˜ï¼‰">è¤‡è£½ç¾¤çµ„é‚€è«‹æ–‡</button>
      </div>
    </section>

    <section class="quizCard" id="quizCard" style="display:none">
      <div class="qHead">
        <div>
          <p class="qTitle" id="qText">é¡Œç›®</p>
          <p class="sub small" id="qSub" style="margin:6px 0 0">é¸å®Œå³é–å®šï¼ˆé¿å…æ”¹ç­”æ¡ˆï¼‰</p>
        </div>
        <div class="chip" id="qChip">Q1</div>
      </div>

      <div class="options" id="options"></div>

      <div class="footer">
        <div class="muted"><span id="statusText">è«‹é¸ä¸€å€‹ç­”æ¡ˆ</span></div>
        <div style="display:flex; gap:10px; flex-wrap:wrap;">
          <button class="btn" id="btnPrev" type="button">ä¸Šä¸€é¡Œ</button>
          <button class="btn primary" id="btnNext" type="button">ä¸‹ä¸€é¡Œ</button>
        </div>
      </div>

      <div class="result" id="result">
        <h3>æ¸¬é©—å®Œæˆ âœ…</h3>
        <div class="scoreRow">
          <div class="scorePill">åˆ†æ•¸ï¼š<span id="score">0</span>/20</div>
          <div class="rank" id="rank">ç¨±è™Ÿ</div>
        </div>

        <details>
          <summary>æŸ¥çœ‹ç­”é¡Œå›é¡§ï¼ˆå«æ­£è§£ï¼‰</summary>
          <div class="review" id="review"></div>
        </details>

        <div style="margin-top:14px; display:flex; gap:10px; flex-wrap:wrap;">
          <button class="btn primary" id="btnCopyResult" type="button">è¤‡è£½æˆç¸¾å…¬å‘Š</button>
          <button class="btn" id="btnReset" type="button">å†ç©ä¸€æ¬¡</button>
        </div>

        <p class="sub small" style="margin-top:12px">
          â€» è‹¥ä½ è¦ã€Œè®“å¤§å®¶æ¯å€‹äººéƒ½å„è‡ªä½œç­”ã€å†çµ±è¨ˆã€ï¼šæŠŠé€™æª”æ¡ˆæ”¾åˆ° GitHub Pages ä¹‹é¡çš„åœ°æ–¹ï¼Œä¸Ÿé€£çµé€²ç¾¤çµ„å°±è¡Œã€‚
        </p>
      </div>
    </section>
  </div>

  <div class="toast" id="toast">å·²è¤‡è£½</div>

<script>
/** æ±ä¸ƒèŠå¤©è€ƒå¤é¡Œåº«ï¼ˆ20 é¡Œï½œå››é¸ä¸€ï¼‰
 *  - correct: 0..3 å°æ‡‰ A..D
 */
const QUESTIONS = [
  { q: "Q1. é€™å€‹ç¾¤çµ„æœ€ä¸€é–‹å§‹è¢«æ”¹æˆçš„ç¾¤çµ„åç¨±æ˜¯ï¼Ÿ", opts:["åˆ¶æœä¹‹å¤œå™¨æçµ„","è·¨å¹´é›£å—å±€","äº¤æ›ç¦®ç‰©å§”å“¡æœƒ","æ±ä¸ƒè®€æ›¸æœƒ"], correct:0, note:"ç¾¤åæ”¹ç‚ºã€Œåˆ¶æœä¹‹å¤œå™¨æçµ„ã€ã€‚" },
  { q: "Q2. äº¤æ›ç¦®ç‰©æœ€å¾Œå¤§æ–¹å‘çš„é ç®—å€é–“æ˜¯ï¼Ÿ", opts:["100-200","200-300","300-500","500-1000"], correct:1, note:"è¨è«–å¾Œå®šåœ¨ 200-300ã€‚" },
  { q: "Q3. é—œæ–¼ã€å…ˆæŠ½å†è²·ã€vsã€è²·å¥½å†æŠ½ã€ï¼Œå¤§å®¶æ¯”è¼ƒåå‘ï¼Ÿ", opts:["å…ˆæŠ½å†è²·","è²·å¥½å†æŠ½","ä¸€åŠä¸€åŠ","ä¹¾è„†ä¸äº¤æ›"], correct:1, note:"æœ‰äººå›ã€Œè²·å¥½æŠ½ä¸€ç¥¨ã€ã€‚" },
  { q: "Q4. èª°èªªè‡ªå·±ã€æ‰“ä¸é–‹æŠ•ç¥¨ç•«é¢ï¼Œé€£é¸é …éƒ½çœ‹ä¸åˆ°ã€ï¼Ÿ", opts:["æœæ–‡æ™§","æœ±éŸ‹ç¿°","ä½•å®œç©","é»ƒä½©å„€"], correct:2, note:"ä½•å®œç©èªªæŠ•ç¥¨æ‰“ä¸é–‹ã€‚" },
  { q: "Q5. èª°ä¹Ÿè¡¨ç¤ºã€Œæˆ‘ä¹Ÿæ‰“ä¸é–‹ã€æŠ•ç¥¨ï¼Ÿ", opts:["æœ±éŸ‹ç¿°","è³´å®‡å“²","æœæ–‡æ™§","ææ¬£ç¿°"], correct:0, note:"æœ±éŸ‹ç¿°ä¹Ÿèªªæ‰“ä¸é–‹ã€‚" },
  { q: "Q6. æœ‰äººèªªã€å¦‚æœé€æ³¡èŠ™è£¡é¢å¡å…©åƒä¹Ÿæ˜¯å¯ä»¥çš„ã€ï¼Œæ˜¯èª°è¬›çš„ï¼Ÿ", opts:["ææ¬£ç¿°","æœ±éŸ‹ç¿°","ä½•å®œç©","è³´å®‡å“²"], correct:1, note:"æœ±éŸ‹ç¿°èªªæ³¡èŠ™å¡å…©åƒä¹Ÿå¯ä»¥ã€‚" },
  { q: "Q7. ã€ä¸‰è§’éŒã€è¢«æå‡ºç•¶ç¦®ç‰©å€™é¸ï¼Œæå‡ºçš„äººæ˜¯ï¼Ÿ", opts:["æœæ–‡æ™§","æœ±éŸ‹ç¿°","é»ƒä½©å„€","ä½•å®œç©"], correct:1, note:"æœ±éŸ‹ç¿°æã€Œä¸‰è§’éŒå¯ä»¥å—ã€ã€‚" },
  { q: "Q8. ã€æˆ‘ä¹‹å‰æœ‰é€éå°–å«é›ã€æ˜¯èª°èªªçš„ï¼Ÿ", opts:["æœæ–‡æ™§","è³´å®‡å“²","é»ƒä½©å„€","ææ¬£ç¿°"], correct:0, note:"æœæ–‡æ™§èªªä¹‹å‰é€éå°–å«é›ã€‚" },
  { q: "Q9. èª°èªªéã€ç”¨ S pen çš„ç­†é ­æŠ“ä¸€æŠŠä¸Ÿä½ ã€ï¼Ÿ", opts:["è³´å®‡å“²","æœ±éŸ‹ç¿°","ä½•å®œç©","é»ƒä½©å„€"], correct:0, note:"è³´å®‡å“²çš„ææ¡ˆã€‚" },
  { q: "Q10. ã€IKEA æ«ƒå­å¤šé™„çš„å…©é¡†èºçµ²ã€é€™å€‹ç¦®ç‰©æ¢—æ˜¯èª°è¬›çš„ï¼Ÿ", opts:["æœæ–‡æ™§","æœ±éŸ‹ç¿°","ææ¬£ç¿°","ä½•å®œç©"], correct:1, note:"æœ±éŸ‹ç¿°æåˆ° IKEA å¤šé™„çš„èºçµ²ã€‚" },
  { q: "Q11. ç¾¤çµ„è£¡åœ¨èŠã€å¿ƒå°– (apex)ã€æ™‚ï¼Œå¤§å®¶æœ€å¾Œç¢ºèªæ˜¯ç¬¬å¹¾è‚‹é–“ï¼Ÿ", opts:["ç¬¬3è‚‹é–“","ç¬¬4è‚‹é–“","ç¬¬5è‚‹é–“","ç¬¬6è‚‹é–“"], correct:2, note:"æœ€å¾Œç¢ºèªæ˜¯ç¬¬5è‚‹é–“ã€‚" },
  { q: "Q12. æœ‰äººèªª palpate å¿ƒå°–è¦ã€æˆ´æ‰‹å¥—ï¼Œåšçš„ã€ï¼Œæ˜¯èª°èªªçš„ï¼Ÿ", opts:["è³´å®‡å“²","æœæ–‡æ™§","é»ƒä½©å„€","æœ±éŸ‹ç¿°"], correct:0, note:"è³´å®‡å“²èªªè¦æˆ´åšæ‰‹å¥—æ‘¸ã€‚" },
  { q: "Q13. èª°åæ§½ã€ŒPalpate è³´å®‡å“²çš„äººæœƒæ‘¸éŒ¯å§ã€ï¼Ÿ", opts:["é»ƒä½©å„€","ä½•å®œç©","æœ±éŸ‹ç¿°","ææ¬£ç¿°"], correct:0, note:"é»ƒä½©å„€çš„åæ§½ã€‚" },
  { q: "Q14. ã€æ—åŒ—æ·¡éº—ã€é€™æ®µæ´—è…¦æ–‡å­—æ˜¯èª°ç™¼çš„ï¼Ÿ", opts:["æœ±éŸ‹ç¿°","æœæ–‡æ™§","è³´å®‡å“²","ææ¬£ç¿°"], correct:0, note:"æœ±éŸ‹ç¿°è²¼äº†æ•´æ®µã€Œæ—åŒ—æ·¡éº—ã€ã€‚" },
  { q: "Q15. é—œæ–¼å–å•¤é…’ï¼Œèª°ç›´æ¥èªªã€Œä¸å–å•¤é…’ã€ï¼Ÿ", opts:["æœæ–‡æ™§","æœ±éŸ‹ç¿°","è³´å®‡å“²","é»ƒä½©å„€"], correct:0, note:"æœæ–‡æ™§èªªä¸å–å•¤é…’ã€‚" },
  { q: "Q16. å®µå¤œè¨è«–æ™‚ï¼Œæœ‰äººæåˆ°å¯ä»¥ã€ç·šä¸Šè¨‚ã€20:30 ä¸‹å–®ã€ï¼Œæ˜¯èª°èªªçš„ï¼Ÿ", opts:["è³´å®‡å“²","é»ƒä½©å„€","æœæ–‡æ™§","æœ±éŸ‹ç¿°"], correct:0, note:"è³´å®‡å“²æä¾›ç·šä¸Šè¨‚çš„æ–¹æ¡ˆã€‚" },
  { q: "Q17. è½åˆ°ã€é¼“å±±å¥½é ã€é€™å¥ï¼Œæ˜¯èª°èªªçš„ï¼Ÿ", opts:["ä½•å®œç©","æœæ–‡æ™§","ææ¬£ç¿°","é»ƒä½©å„€"], correct:1, note:"æœæ–‡æ™§è¦ºå¾—é¼“å±±é ã€‚" },
  { q: "Q18. ã€å‡¹å­åº•æ—é‚Šè€Œå·²ã€é€™å€‹è£œå……æ˜¯èª°è¬›çš„ï¼Ÿ", opts:["æœ±éŸ‹ç¿°","è³´å®‡å“²","é»ƒä½©å„€","æœæ–‡æ™§"], correct:1, note:"è³´å®‡å“²èªªå‡¹å­åº•æ—é‚Šè€Œå·²ã€‚" },
  { q: "Q19. å®µå¤œä¸‹å–®æ™‚ï¼Œå‡ºç¾ã€Œäº‚ç‚¸1000ã€é€™å¥è©±ï¼Œæ˜¯èª°ç™¼çš„ï¼Ÿ", opts:["è³´å®‡å“²","æœæ–‡æ™§","é»ƒä½©å„€","ææ¬£ç¿°"], correct:0, note:"è³´å®‡å“²è²¼ã€Œäº‚ç‚¸1000ã€ã€‚" },
  { q: "Q20. æœ‰äººèªªè‡ªå·±ç¦®ç‰©æ˜¯ã€è¿·å®¢å¤è–èª•æ¨¹ã€ï¼Œæ˜¯èª°ï¼Ÿ", opts:["æœæ–‡æ™§","ææ¬£ç¿°","æœ±éŸ‹ç¿°","ä½•å®œç©"], correct:0, note:"æœæ–‡æ™§æåˆ°è¿·å®¢å¤è–èª•æ¨¹ã€‚" },
];

const state = {
  started:false,
  idx:0,
  answers: Array(QUESTIONS.length).fill(null), // 0..3
  locked: Array(QUESTIONS.length).fill(false),
};

const el = (id)=>document.getElementById(id);
const toast = (msg)=>{
  const t = el("toast");
  t.textContent = msg;
  t.classList.add("show");
  setTimeout(()=>t.classList.remove("show"), 1400);
};

const letters = ["A","B","C","D"];
const rankOf = (score)=>{
  if(score===20) return "ğŸ‘‘ çœŸãƒ»æ±ä¸ƒæ‘¯å‹ï¼ˆæ»¿åˆ†ç‹ï¼‰";
  if(score>=17) return "ğŸ’ èŠå¤©è¨˜æ†¶é«” 128GB";
  if(score>=14) return "ğŸ”¥ ä½ æœ‰åœ¨èªçœŸçœ‹ç¾¤çµ„";
  if(score>=10) return "ğŸ™‚ æ™®é€šæœ‹å‹ï¼ˆé‚„è¡Œå•¦ï¼‰";
  if(score>=6)  return "ğŸ«  æ½›æ°´å“¡ï¼ˆå¶çˆ¾æµ®ä¸Šä¾†ï¼‰";
  return "ğŸ§Š è·¯äººï¼ˆä½ ç¢ºå®šåœ¨ç¾¤çµ„ï¼Ÿï¼‰";
};

function updateProgress(){
  const answered = state.answers.filter(v=>v!==null).length;
  el("pNow").textContent = answered;
  el("pTotal").textContent = QUESTIONS.length;
  el("fill").style.width = Math.round(answered/QUESTIONS.length*100) + "%";
}

function renderQuestion(){
  const q = QUESTIONS[state.idx];
  el("qChip").textContent = "Q" + (state.idx+1);
  el("qText").textContent = q.q;

  const container = el("options");
  container.innerHTML = "";

  const chosen = state.answers[state.idx];

  q.opts.forEach((txt, i)=>{
    const div = document.createElement("div");
    div.className = "opt";
    if(state.locked[state.idx]) div.classList.add("disabled");
    if(chosen===i) div.classList.add("selected");

    const bubble = document.createElement("div");
    bubble.className = "bubble";
    bubble.textContent = letters[i];

    const span = document.createElement("div");
    span.className = "txt";
    span.textContent = txt;

    div.appendChild(bubble);
    div.appendChild(span);

    div.addEventListener("click", ()=>{
      if(state.locked[state.idx]) return;
      state.answers[state.idx] = i;
      state.locked[state.idx] = true;
      toast("å·²é–å®šç­”æ¡ˆ");
      updateProgress();
      renderQuestion();
      updateNav();
      // auto-next (mobile friendly)
      setTimeout(()=>{
        if(state.idx < QUESTIONS.length-1) { state.idx++; renderQuestion(); updateNav(); }
        else { showResult(); }
      }, 380);
    });

    container.appendChild(div);
  });

  // status
  if(chosen===null) el("statusText").textContent = "è«‹é¸ä¸€å€‹ç­”æ¡ˆ";
  else el("statusText").textContent = state.locked[state.idx] ? "å·²é¸æ“‡ä¸¦é–å®š" : "å·²é¸æ“‡ï¼ˆå°šæœªé–å®šï¼‰";
}

function updateNav(){
  el("btnPrev").disabled = state.idx===0;
  el("btnNext").textContent = (state.idx===QUESTIONS.length-1) ? "çœ‹çµæœ" : "ä¸‹ä¸€é¡Œ";
}

function showQuiz(){
  el("hero").style.display = "none";
  el("quizCard").style.display = "block";
  el("btnResetTop").style.display = "inline-flex";
  renderQuestion();
  updateNav();
  updateProgress();
  el("result").style.display = "none";
}

function showResult(){
  // calculate
  let score = 0;
  for(let i=0;i<QUESTIONS.length;i++){
    if(state.answers[i]===QUESTIONS[i].correct) score++;
  }
  el("score").textContent = score;
  el("rank").textContent = rankOf(score);
  el("result").style.display = "block";

  // lock all (for safety)
  for(let i=0;i<QUESTIONS.length;i++) state.locked[i]=true;

  // build review
  const r = el("review");
  r.innerHTML = "";
  QUESTIONS.forEach((qq, i)=>{
    const it = document.createElement("div");
    it.className = "reviewItem";
    const your = state.answers[i];
    const ok = your===qq.correct;

    const t = document.createElement("div");
    t.className = "t";
    t.textContent = `Q${i+1} ${ok ? "âœ…" : "âŒ"}`;

    const a = document.createElement("div");
    a.className = "a";
    const yourTxt = (your===null) ? "ï¼ˆæœªä½œç­”ï¼‰" : `${letters[your]}. ${qq.opts[your]}`;
    const corrTxt = `${letters[qq.correct]}. ${qq.opts[qq.correct]}`;
    a.innerHTML =
      `<div><span class="${ok ? "pillGood":"pillBad"}">ä½ çš„ç­”æ¡ˆï¼š</span> ${escapeHtml(yourTxt)}</div>`+
      `<div><b>æ­£è§£ï¼š</b> ${escapeHtml(corrTxt)}</div>`+
      `<div class="muted small">æç¤ºï¼š${escapeHtml(qq.note || "")}</div>`;

    it.appendChild(t);
    it.appendChild(a);
    r.appendChild(it);
  });

  toast("å·²å®Œæˆï¼å¾€ä¸‹çœ‹åˆ†æ•¸");
}

function escapeHtml(s){
  return String(s)
    .replaceAll("&","&amp;")
    .replaceAll("<","&lt;")
    .replaceAll(">","&gt;")
    .replaceAll('"',"&quot;");
}

function resetAll(){
  state.started=false;
  state.idx=0;
  state.answers = Array(QUESTIONS.length).fill(null);
  state.locked = Array(QUESTIONS.length).fill(false);
  el("hero").style.display = "block";
  el("quizCard").style.display = "none";
  el("btnResetTop").style.display = "none";
  updateProgress();
}

function copyText(text){
  navigator.clipboard.writeText(text).then(()=>toast("å·²è¤‡è£½åˆ°å‰ªè²¼ç°¿")).catch(()=>{
    // fallback
    const ta = document.createElement("textarea");
    ta.value = text;
    document.body.appendChild(ta);
    ta.select();
    document.execCommand("copy");
    ta.remove();
    toast("å·²è¤‡è£½åˆ°å‰ªè²¼ç°¿");
  });
}

el("btnStart").addEventListener("click", ()=>{
  state.started=true;
  showQuiz();
});

el("btnPrev").addEventListener("click", ()=>{
  if(state.idx>0){ state.idx--; renderQuestion(); updateNav(); }
});

el("btnNext").addEventListener("click", ()=>{
  if(state.idx < QUESTIONS.length-1){
    state.idx++; renderQuestion(); updateNav();
  }else{
    showResult();
  }
});

el("btnReset").addEventListener("click", resetAll);
el("btnResetTop").addEventListener("click", resetAll);

el("btnCopyResult").addEventListener("click", ()=>{
  let score = 0;
  for(let i=0;i<QUESTIONS.length;i++){
    if(state.answers[i]===QUESTIONS[i].correct) score++;
  }
  const rank = rankOf(score);
  const time = new Date().toLocaleString("zh-Hant",{hour12:false});
  const lines = [
    "ğŸ‰ã€å‹æƒ…å¤§è€ƒé©—ï½œæ±ä¸ƒé™å®šç‰ˆã€‘ğŸ‰",
    `ğŸ“Œ æˆç¸¾ï¼š${score}/20`,
    `ğŸ·ï¸ ç¨±è™Ÿï¼š${rank}`,
    `ğŸ•’ æ™‚é–“ï¼š${time}`,
    "",
    "ï¼ˆæŠŠé€™æ®µè²¼å›ç¾¤çµ„ï¼Œè®“å¤§å®¶æ¯”èª°æ›´æ‡‚èŠå¤©ï¼ï¼‰"
  ];
  copyText(lines.join("\n"));
});

el("btnShareLink").addEventListener("click", ()=>{
  const msg = [
    "ğŸ®ã€å‹æƒ…å¤§è€ƒé©—ï½œæ±ä¸ƒé™å®šç‰ˆã€‘",
    "20 é¡Œå››é¸ä¸€ï¼Œç­”æ¡ˆéƒ½è—åœ¨ç¾¤çµ„èŠå¤©è£¡ã€‚",
    "",
    "âœ… è¦å‰‡ï¼šä¸å‡†å·çœ‹è¨Šæ¯ã€ä¸å‡†è¨è«–ï¼Œç­”å®Œå†å…¬å¸ƒåˆ†æ•¸ã€‚",
    "",
    "ğŸ“ ç©æ³•ï¼š",
    "1) æ‰“é–‹æ¸¬é©—é é¢",
    "2) 20 é¡Œåšå®Œæœƒé¡¯ç¤ºåˆ†æ•¸èˆ‡ç¨±è™Ÿ",
    "3) ä¸€éµè¤‡è£½æˆç¸¾å…¬å‘Šè²¼å›ç¾¤çµ„",
    "",
    "ï¼ˆæŠŠæ¸¬é©—é é¢ç¶²å€è²¼åœ¨é€™è£¡å°±èƒ½ç©ï¼‰"
  ].join("\n");
  copyText(msg);
});
</script>
</body>
</html>
